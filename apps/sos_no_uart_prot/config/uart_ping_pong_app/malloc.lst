   1               		.file	"malloc.c"
   2               		.arch atmega103
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  17               	.Ltext0:
  18               	.global	sos_blk_mem_change_own
  20               	sos_blk_mem_change_own:
  21               	.LFB19:
  22               	.LM1:
  23               	/* prologue: frame size=0 */
  24 0000 CF93      		push r28
  25 0002 DF93      		push r29
  26               	/* prologue end (size=2) */
  27               	.LM2:
  28 0004 B92F      		mov r27,r25
  29 0006 A82F      		mov r26,r24
  30 0008 1397      		sbiw r26,3
  31               	.LM3:
  32 000a 6F3F      		cpi r22,lo8(-1)
  33 000c 99F0      		breq .L5
  34               	.LM4:
  35 000e 892B      		or r24,r25
  36 0010 89F0      		breq .L5
  37               	.LM5:
  38 0012 ED91      		ld r30,X+
  39 0014 FC91      		ld r31,X
  40 0016 1197      		sbiw r26,1
  41 0018 83E0      		ldi r24,3
  42 001a EE0F      	1:	lsl r30
  43 001c FF1F      		rol r31
  44 001e 8A95      		dec r24
  45 0020 E1F7      		brne 1b
  46 0022 EA0F      		add r30,r26
  47 0024 FB1F      		adc r31,r27
  48 0026 3197      		sbiw r30,1
  49 0028 DB2F      		mov r29,r27
  50 002a CA2F      		mov r28,r26
  51 002c 9A81      		ldd r25,Y+2
  52 002e 8081      		ld r24,Z
  53 0030 9817      		cp r25,r24
  54 0032 19F0      		breq .L4
  55               	.L5:
  56               	.LM6:
  57 0034 8AEE      		ldi r24,lo8(-22)
  58 0036 9FEF      		ldi r25,hi8(-22)
  59 0038 06C0      		rjmp .L1
  60               	.L4:
  61               	.LM7:
  62 003a 6083      		st Z,r22
  63               	.LM8:
  64 003c FB2F      		mov r31,r27
  65 003e EA2F      		mov r30,r26
  66 0040 6283      		std Z+2,r22
  67               	.LM9:
  68 0042 80E0      		ldi r24,lo8(0)
  69 0044 90E0      		ldi r25,hi8(0)
  70               	.L1:
  71               	/* epilogue: frame size=0 */
  72 0046 DF91      		pop r29
  73 0048 CF91      		pop r28
  74 004a 0895      		ret
  75               	/* epilogue end (size=3) */
  76               	/* function sos_blk_mem_change_own size 38 (33) */
  77               	.LFE19:
  80               	Unlink:
  81               	.LFB26:
  82               	.LM10:
  83               	/* prologue: frame size=0 */
  84 004c CF93      		push r28
  85 004e DF93      		push r29
  86               	/* prologue end (size=2) */
  87 0050 F92F      		mov r31,r25
  88 0052 E82F      		mov r30,r24
  89               	.LM11:
  90 0054 A381      		ldd r26,Z+3
  91 0056 B481      		ldd r27,Z+4
  92 0058 8581      		ldd r24,Z+5
  93 005a 9681      		ldd r25,Z+6
  94 005c DB2F      		mov r29,r27
  95 005e CA2F      		mov r28,r26
  96 0060 9E83      		std Y+6,r25
  97 0062 8D83      		std Y+5,r24
  98               	.LM12:
  99 0064 0580      		ldd __tmp_reg__,Z+5
 100 0066 F681      		ldd r31,Z+6
 101 0068 E02D      		mov r30,__tmp_reg__
 102 006a B483      		std Z+4,r27
 103 006c A383      		std Z+3,r26
 104               	/* epilogue: frame size=0 */
 105 006e DF91      		pop r29
 106 0070 CF91      		pop r28
 107 0072 0895      		ret
 108               	/* epilogue end (size=3) */
 109               	/* function Unlink size 20 (15) */
 110               	.LFE26:
 112               	.global	sos_blk_mem_longterm_alloc
 114               	sos_blk_mem_longterm_alloc:
 115               	.LFB16:
 116               	.LM13:
 117               	/* prologue: frame size=0 */
 118 0074 AF92      		push r10
 119 0076 BF92      		push r11
 120 0078 CF92      		push r12
 121 007a DF92      		push r13
 122 007c EF92      		push r14
 123 007e FF92      		push r15
 124 0080 0F93      		push r16
 125 0082 1F93      		push r17
 126 0084 CF93      		push r28
 127 0086 DF93      		push r29
 128               	/* prologue end (size=10) */
 129 0088 A62E      		mov r10,r22
 130               	.LM14:
 131 008a EE24      		clr r14
 132 008c FF24      		clr r15
 133               	.LM15:
 134 008e 0097      		sbiw r24,0
 135 0090 19F4      		brne .L8
 136               	.LM16:
 137 0092 9F2D      		mov r25,r15
 138 0094 8E2D      		mov r24,r14
 139 0096 8DC0      		rjmp .L7
 140               	.L8:
 141               	.LM17:
 142 0098 5BE0      		ldi r21,lo8(11)
 143 009a C52E      		mov r12,r21
 144 009c D12C      		mov r13,__zero_reg__
 145 009e C80E      		add r12,r24
 146 00a0 D91E      		adc r13,r25
 147 00a2 43E0      		ldi r20,3
 148 00a4 D694      	1:	lsr r13
 149 00a6 C794      		ror r12
 150 00a8 4A95      		dec r20
 151 00aa E1F7      		brne 1b
 152               	.LM18:
 153               	/* #APP */
 154 00ac BFB6      		in r11, __SREG__
 155 00ae F894      		cli
 156               		
 157               	.LM19:
 158               	/* #NOAPP */
 159 00b0 E091 0000 		lds r30,mSentinel
 160 00b4 F091 0000 		lds r31,(mSentinel)+1
 161 00b8 C581      		ldd r28,Z+5
 162 00ba D681      		ldd r29,Z+6
 163 00bc CE17      		cp r28,r30
 164 00be DF07      		cpc r29,r31
 165 00c0 41F1      		breq .L27
 166               	.L34:
 167               	.LBB2:
 168               	.LBB3:
 169               	.LBB4:
 170               	.LM20:
 171 00c2 0881      		ld r16,Y
 172 00c4 1981      		ldd r17,Y+1
 173 00c6 33E0      		ldi r19,3
 174 00c8 000F      	1:	lsl r16
 175 00ca 111F      		rol r17
 176 00cc 3A95      		dec r19
 177 00ce E1F7      		brne 1b
 178 00d0 0C0F      		add r16,r28
 179 00d2 1D1F      		adc r17,r29
 180               	.LM21:
 181 00d4 F12F      		mov r31,r17
 182 00d6 E02F      		mov r30,r16
 183 00d8 8081      		ld r24,Z
 184 00da 9181      		ldd r25,Z+1
 185 00dc 9923      		tst r25
 186 00de 7CF0      		brlt .L25
 187               	.LM22:
 188 00e0 912F      		mov r25,r17
 189 00e2 802F      		mov r24,r16
 190 00e4 0E94 0000 		call Unlink
 191               	.LM23:
 192 00e8 8881      		ld r24,Y
 193 00ea 9981      		ldd r25,Y+1
 194 00ec F12F      		mov r31,r17
 195 00ee E02F      		mov r30,r16
 196 00f0 2081      		ld r18,Z
 197 00f2 3181      		ldd r19,Z+1
 198 00f4 820F      		add r24,r18
 199 00f6 931F      		adc r25,r19
 200 00f8 9983      		std Y+1,r25
 201 00fa 8883      		st Y,r24
 202               	.LBE4:
 203 00fc E2CF      		rjmp .L34
 204               	.L25:
 205               	.LBE3:
 206               	.LBE2:
 207               	.LM24:
 208 00fe 0D80      		ldd __tmp_reg__,Y+5
 209 0100 DE81      		ldd r29,Y+6
 210 0102 C02D      		mov r28,__tmp_reg__
 211 0104 8091 0000 		lds r24,mSentinel
 212 0108 9091 0000 		lds r25,(mSentinel)+1
 213 010c C817      		cp r28,r24
 214 010e D907      		cpc r29,r25
 215 0110 C1F6      		brne .L34
 216               	.L27:
 217               	.LM25:
 218 0112 E091 0000 		lds r30,mSentinel
 219 0116 F091 0000 		lds r31,(mSentinel)+1
 220 011a C581      		ldd r28,Z+5
 221 011c D681      		ldd r29,Z+6
 222 011e CE17      		cp r28,r30
 223 0120 DF07      		cpc r29,r31
 224 0122 99F0      		breq .L30
 225               	.L21:
 226               	.LM26:
 227 0124 EC16      		cp r14,r28
 228 0126 FD06      		cpc r15,r29
 229 0128 38F4      		brsh .L19
 230 012a 8881      		ld r24,Y
 231 012c 9981      		ldd r25,Y+1
 232 012e 8C15      		cp r24,r12
 233 0130 9D05      		cpc r25,r13
 234 0132 10F0      		brlo .L19
 235               	.LM27:
 236 0134 EC2E      		mov r14,r28
 237 0136 FD2E      		mov r15,r29
 238               	.L19:
 239               	.LM28:
 240 0138 0D80      		ldd __tmp_reg__,Y+5
 241 013a DE81      		ldd r29,Y+6
 242 013c C02D      		mov r28,__tmp_reg__
 243 013e CE17      		cp r28,r30
 244 0140 DF07      		cpc r29,r31
 245 0142 81F7      		brne .L21
 246               	.LM29:
 247 0144 E114      		cp r14,__zero_reg__
 248 0146 F104      		cpc r15,__zero_reg__
 249 0148 21F4      		brne .L22
 250               	.L30:
 251               	.LM30:
 252               	/* #APP */
 253 014a BFBE      		out __SREG__, r11
 254               		
 255               	.LM31:
 256               	/* #NOAPP */
 257 014c 80E0      		ldi r24,lo8(0)
 258 014e 90E0      		ldi r25,hi8(0)
 259 0150 30C0      		rjmp .L7
 260               	.L22:
 261               	.LM32:
 262 0152 FF2D      		mov r31,r15
 263 0154 EE2D      		mov r30,r14
 264 0156 8081      		ld r24,Z
 265 0158 9181      		ldd r25,Z+1
 266 015a 8C19      		sub r24,r12
 267 015c 9D09      		sbc r25,r13
 268 015e D92F      		mov r29,r25
 269 0160 C82F      		mov r28,r24
 270 0162 23E0      		ldi r18,3
 271 0164 CC0F      	1:	lsl r28
 272 0166 DD1F      		rol r29
 273 0168 2A95      		dec r18
 274 016a E1F7      		brne 1b
 275 016c CE0D      		add r28,r14
 276 016e DF1D      		adc r29,r15
 277               	.LM33:
 278 0170 CE15      		cp r28,r14
 279 0172 DF05      		cpc r29,r15
 280 0174 29F4      		brne .L23
 281               	.LM34:
 282 0176 8C2F      		mov r24,r28
 283 0178 9D2F      		mov r25,r29
 284 017a 0E94 0000 		call Unlink
 285 017e 06C0      		rjmp .L24
 286               	.L23:
 287               	.LM35:
 288 0180 FF2D      		mov r31,r15
 289 0182 EE2D      		mov r30,r14
 290 0184 9183      		std Z+1,r25
 291 0186 8083      		st Z,r24
 292               	.LM36:
 293 0188 D982      		std Y+1,r13
 294 018a C882      		st Y,r12
 295               	.L24:
 296               	.LM37:
 297 018c E881      		ld r30,Y
 298 018e F981      		ldd r31,Y+1
 299 0190 F068      		ori r31,hi8(-32768)
 300 0192 F983      		std Y+1,r31
 301 0194 E883      		st Y,r30
 302               	.LM38:
 303 0196 AA82      		std Y+2,r10
 304               	.LM39:
 305 0198 93E0      		ldi r25,3
 306 019a EE0F      	1:	lsl r30
 307 019c FF1F      		rol r31
 308 019e 9A95      		dec r25
 309 01a0 E1F7      		brne 1b
 310 01a2 EC0F      		add r30,r28
 311 01a4 FD1F      		adc r31,r29
 312 01a6 3197      		sbiw r30,1
 313 01a8 A082      		st Z,r10
 314               	.LM40:
 315               	/* #APP */
 316 01aa BFBE      		out __SREG__, r11
 317               		
 318               	.LM41:
 319               	/* #NOAPP */
 320 01ac 8C2F      		mov r24,r28
 321 01ae 9D2F      		mov r25,r29
 322 01b0 0396      		adiw r24,3
 323               	.L7:
 324               	/* epilogue: frame size=0 */
 325 01b2 DF91      		pop r29
 326 01b4 CF91      		pop r28
 327 01b6 1F91      		pop r17
 328 01b8 0F91      		pop r16
 329 01ba FF90      		pop r15
 330 01bc EF90      		pop r14
 331 01be DF90      		pop r13
 332 01c0 CF90      		pop r12
 333 01c2 BF90      		pop r11
 334 01c4 AF90      		pop r10
 335 01c6 0895      		ret
 336               	/* epilogue end (size=11) */
 337               	/* function sos_blk_mem_longterm_alloc size 181 (160) */
 338               	.LFE16:
 341               	InsertAfter:
 342               	.LFB25:
 343               	.LM42:
 344               	/* prologue: frame size=0 */
 345 01c8 CF93      		push r28
 346 01ca DF93      		push r29
 347               	/* prologue end (size=2) */
 348 01cc F92F      		mov r31,r25
 349 01ce E82F      		mov r30,r24
 350               	.LM43:
 351 01d0 A091 0000 		lds r26,mSentinel
 352 01d4 B091 0000 		lds r27,(mSentinel)+1
 353 01d8 DB2F      		mov r29,r27
 354 01da CA2F      		mov r28,r26
 355 01dc 8D81      		ldd r24,Y+5
 356 01de 9E81      		ldd r25,Y+6
 357               	.LM44:
 358 01e0 FE83      		std Y+6,r31
 359 01e2 ED83      		std Y+5,r30
 360               	.LM45:
 361 01e4 B483      		std Z+4,r27
 362 01e6 A383      		std Z+3,r26
 363               	.LM46:
 364 01e8 9683      		std Z+6,r25
 365 01ea 8583      		std Z+5,r24
 366               	.LM47:
 367 01ec D92F      		mov r29,r25
 368 01ee C82F      		mov r28,r24
 369 01f0 FC83      		std Y+4,r31
 370 01f2 EB83      		std Y+3,r30
 371               	/* epilogue: frame size=0 */
 372 01f4 DF91      		pop r29
 373 01f6 CF91      		pop r28
 374 01f8 0895      		ret
 375               	/* epilogue end (size=3) */
 376               	/* function InsertAfter size 25 (20) */
 377               	.LFE25:
 379               	.global	sos_blk_mem_free
 381               	sos_blk_mem_free:
 382               	.LFB18:
 383               	.LM48:
 384               	/* prologue: frame size=0 */
 385 01fa 1F93      		push r17
 386 01fc CF93      		push r28
 387 01fe DF93      		push r29
 388               	/* prologue end (size=3) */
 389               	.LM49:
 390 0200 0097      		sbiw r24,0
 391 0202 09F4      		brne .+2
 392 0204 37C0      		rjmp .L36
 393               	.LM50:
 394 0206 B92F      		mov r27,r25
 395 0208 A82F      		mov r26,r24
 396 020a 1397      		sbiw r26,3
 397               	.LM51:
 398 020c 80E0      		ldi r24,hi8(malloc_heap)
 399 020e A030      		cpi r26,lo8(malloc_heap)
 400 0210 B807      		cpc r27,r24
 401 0212 80F1      		brlo .L36
 402 0214 8091 0000 		lds r24,mNumberOfBlocks
 403 0218 9091 0000 		lds r25,(mNumberOfBlocks)+1
 404 021c 73E0      		ldi r23,3
 405 021e 880F      	1:	lsl r24
 406 0220 991F      		rol r25
 407 0222 7A95      		dec r23
 408 0224 E1F7      		brne 1b
 409 0226 8050      		subi r24,lo8(-(malloc_heap))
 410 0228 9040      		sbci r25,hi8(-(malloc_heap))
 411 022a A817      		cp r26,r24
 412 022c B907      		cpc r27,r25
 413 022e 10F5      		brsh .L36
 414               	.LM52:
 415 0230 2D91      		ld r18,X+
 416 0232 3C91      		ld r19,X
 417 0234 1197      		sbiw r26,1
 418 0236 3F77      		andi r19,hi8(32767)
 419 0238 F32F      		mov r31,r19
 420 023a E22F      		mov r30,r18
 421 023c 63E0      		ldi r22,3
 422 023e EE0F      	1:	lsl r30
 423 0240 FF1F      		rol r31
 424 0242 6A95      		dec r22
 425 0244 E1F7      		brne 1b
 426 0246 EA0F      		add r30,r26
 427 0248 FB1F      		adc r31,r27
 428 024a 3197      		sbiw r30,1
 429 024c DB2F      		mov r29,r27
 430 024e CA2F      		mov r28,r26
 431 0250 9A81      		ldd r25,Y+2
 432 0252 8081      		ld r24,Z
 433 0254 9817      		cp r25,r24
 434 0256 71F4      		brne .L36
 435               	.LM53:
 436               	/* #APP */
 437 0258 1FB7      		in r17, __SREG__
 438 025a F894      		cli
 439               		
 440               	.LM54:
 441               	/* #NOAPP */
 442 025c 1196      		adiw r26,1
 443 025e 3C93      		st X,r19
 444 0260 2E93      		st -X,r18
 445               	.LM55:
 446 0262 8FEF      		ldi r24,lo8(-1)
 447 0264 FB2F      		mov r31,r27
 448 0266 EA2F      		mov r30,r26
 449 0268 8283      		std Z+2,r24
 450               	.LM56:
 451 026a 8A2F      		mov r24,r26
 452 026c 9B2F      		mov r25,r27
 453 026e 0E94 0000 		call InsertAfter
 454               	.LM57:
 455               	/* #APP */
 456 0272 1FBF      		out __SREG__, r17
 457               		
 458               	/* #NOAPP */
 459               	.L36:
 460               	/* epilogue: frame size=0 */
 461 0274 DF91      		pop r29
 462 0276 CF91      		pop r28
 463 0278 1F91      		pop r17
 464 027a 0895      		ret
 465               	/* epilogue end (size=4) */
 466               	/* function sos_blk_mem_free size 72 (65) */
 467               	.LFE18:
 469               	.global	sos_blk_mem_alloc
 471               	sos_blk_mem_alloc:
 472               	.LFB17:
 473               	.LM58:
 474               	/* prologue: frame size=0 */
 475 027c CF92      		push r12
 476 027e DF92      		push r13
 477 0280 EF92      		push r14
 478 0282 FF92      		push r15
 479 0284 0F93      		push r16
 480 0286 1F93      		push r17
 481 0288 CF93      		push r28
 482 028a DF93      		push r29
 483               	/* prologue end (size=8) */
 484 028c C62E      		mov r12,r22
 485               	.LM59:
 486 028e 0097      		sbiw r24,0
 487 0290 09F4      		brne .+2
 488 0292 87C0      		rjmp .L41
 489               	.LM60:
 490 0294 2BE0      		ldi r18,lo8(11)
 491 0296 E22E      		mov r14,r18
 492 0298 F12C      		mov r15,__zero_reg__
 493 029a E80E      		add r14,r24
 494 029c F91E      		adc r15,r25
 495 029e 93E0      		ldi r25,3
 496 02a0 F694      	1:	lsr r15
 497 02a2 E794      		ror r14
 498 02a4 9A95      		dec r25
 499 02a6 E1F7      		brne 1b
 500               	.LM61:
 501               	/* #APP */
 502 02a8 DFB6      		in r13, __SREG__
 503 02aa F894      		cli
 504               		
 505               	.LM62:
 506               	/* #NOAPP */
 507 02ac E091 0000 		lds r30,mSentinel
 508 02b0 F091 0000 		lds r31,(mSentinel)+1
 509 02b4 0581      		ldd r16,Z+5
 510 02b6 1681      		ldd r17,Z+6
 511 02b8 0E17      		cp r16,r30
 512 02ba 1F07      		cpc r17,r31
 513 02bc 91F1      		breq .L44
 514               	.L60:
 515               	.LBB5:
 516               	.LBB6:
 517               	.LBB7:
 518               	.LM63:
 519 02be B12F      		mov r27,r17
 520 02c0 A02F      		mov r26,r16
 521 02c2 CD91      		ld r28,X+
 522 02c4 DC91      		ld r29,X
 523 02c6 83E0      		ldi r24,3
 524 02c8 CC0F      	1:	lsl r28
 525 02ca DD1F      		rol r29
 526 02cc 8A95      		dec r24
 527 02ce E1F7      		brne 1b
 528 02d0 C00F      		add r28,r16
 529 02d2 D11F      		adc r29,r17
 530               	.LM64:
 531 02d4 8881      		ld r24,Y
 532 02d6 9981      		ldd r25,Y+1
 533 02d8 9923      		tst r25
 534 02da 8CF0      		brlt .L49
 535               	.LM65:
 536 02dc 8C2F      		mov r24,r28
 537 02de 9D2F      		mov r25,r29
 538 02e0 0E94 0000 		call Unlink
 539               	.LM66:
 540 02e4 F12F      		mov r31,r17
 541 02e6 E02F      		mov r30,r16
 542 02e8 8081      		ld r24,Z
 543 02ea 9181      		ldd r25,Z+1
 544 02ec 2881      		ld r18,Y
 545 02ee 3981      		ldd r19,Y+1
 546 02f0 820F      		add r24,r18
 547 02f2 931F      		adc r25,r19
 548 02f4 9183      		std Z+1,r25
 549 02f6 8083      		st Z,r24
 550               	.LM67:
 551 02f8 8E15      		cp r24,r14
 552 02fa 9F05      		cpc r25,r15
 553 02fc 00F3      		brlo .L60
 554               	.L49:
 555               	.LBE7:
 556               	.LBE6:
 557               	.LBE5:
 558               	.LM68:
 559 02fe B12F      		mov r27,r17
 560 0300 A02F      		mov r26,r16
 561 0302 8D91      		ld r24,X+
 562 0304 9C91      		ld r25,X
 563 0306 8E15      		cp r24,r14
 564 0308 9F05      		cpc r25,r15
 565 030a 58F4      		brsh .L44
 566               	.LM69:
 567 030c D12F      		mov r29,r17
 568 030e C02F      		mov r28,r16
 569 0310 0D81      		ldd r16,Y+5
 570 0312 1E81      		ldd r17,Y+6
 571 0314 8091 0000 		lds r24,mSentinel
 572 0318 9091 0000 		lds r25,(mSentinel)+1
 573 031c 0817      		cp r16,r24
 574 031e 1907      		cpc r17,r25
 575 0320 71F6      		brne .L60
 576               	.L44:
 577               	.LM70:
 578 0322 8091 0000 		lds r24,mSentinel
 579 0326 9091 0000 		lds r25,(mSentinel)+1
 580 032a 0817      		cp r16,r24
 581 032c 1907      		cpc r17,r25
 582 032e 21F4      		brne .L53
 583               	.LM71:
 584               	/* #APP */
 585 0330 DFBE      		out __SREG__, r13
 586               		
 587               	.LM72:
 588               	/* #NOAPP */
 589 0332 80E0      		ldi r24,lo8(0)
 590 0334 90E0      		ldi r25,hi8(0)
 591 0336 35C0      		rjmp .L41
 592               	.L53:
 593               	.LM73:
 594 0338 F12F      		mov r31,r17
 595 033a E02F      		mov r30,r16
 596 033c 8081      		ld r24,Z
 597 033e 9181      		ldd r25,Z+1
 598 0340 E816      		cp r14,r24
 599 0342 F906      		cpc r15,r25
 600 0344 A8F4      		brsh .L54
 601               	.LBB8:
 602               	.LBB9:
 603               	.LM74:
 604 0346 FF2D      		mov r31,r15
 605 0348 EE2D      		mov r30,r14
 606 034a B3E0      		ldi r27,3
 607 034c EE0F      	1:	lsl r30
 608 034e FF1F      		rol r31
 609 0350 BA95      		dec r27
 610 0352 E1F7      		brne 1b
 611 0354 E00F      		add r30,r16
 612 0356 F11F      		adc r31,r17
 613               	.LM75:
 614 0358 8E19      		sub r24,r14
 615 035a 9F09      		sbc r25,r15
 616 035c 9183      		std Z+1,r25
 617 035e 8083      		st Z,r24
 618               	.LM76:
 619 0360 B12F      		mov r27,r17
 620 0362 A02F      		mov r26,r16
 621 0364 ED92      		st X+,r14
 622 0366 FC92      		st X,r15
 623               	.LM77:
 624 0368 8E2F      		mov r24,r30
 625 036a 9F2F      		mov r25,r31
 626 036c 0E94 0000 		call InsertAfter
 627               	.L54:
 628               	.LBE9:
 629               	.LBE8:
 630               	.LM78:
 631 0370 912F      		mov r25,r17
 632 0372 802F      		mov r24,r16
 633 0374 0E94 0000 		call Unlink
 634               	.LM79:
 635 0378 D12F      		mov r29,r17
 636 037a C02F      		mov r28,r16
 637 037c E881      		ld r30,Y
 638 037e F981      		ldd r31,Y+1
 639 0380 F068      		ori r31,hi8(-32768)
 640 0382 F983      		std Y+1,r31
 641 0384 E883      		st Y,r30
 642               	.LM80:
 643 0386 CA82      		std Y+2,r12
 644               	.LM81:
 645 0388 A3E0      		ldi r26,3
 646 038a EE0F      	1:	lsl r30
 647 038c FF1F      		rol r31
 648 038e AA95      		dec r26
 649 0390 E1F7      		brne 1b
 650 0392 E00F      		add r30,r16
 651 0394 F11F      		adc r31,r17
 652 0396 3197      		sbiw r30,1
 653 0398 C082      		st Z,r12
 654               	.LM82:
 655               	/* #APP */
 656 039a DFBE      		out __SREG__, r13
 657               		
 658               	.LM83:
 659               	/* #NOAPP */
 660 039c 912F      		mov r25,r17
 661 039e 802F      		mov r24,r16
 662 03a0 0396      		adiw r24,3
 663               	.L41:
 664               	/* epilogue: frame size=0 */
 665 03a2 DF91      		pop r29
 666 03a4 CF91      		pop r28
 667 03a6 1F91      		pop r17
 668 03a8 0F91      		pop r16
 669 03aa FF90      		pop r15
 670 03ac EF90      		pop r14
 671 03ae DF90      		pop r13
 672 03b0 CF90      		pop r12
 673 03b2 0895      		ret
 674               	/* epilogue end (size=9) */
 675               	/* function sos_blk_mem_alloc size 167 (150) */
 676               	.LFE17:
 678               	.global	mem_remove_all
 680               	mem_remove_all:
 681               	.LFB20:
 682               	.LM84:
 683               	/* prologue: frame size=0 */
 684 03b4 0F93      		push r16
 685 03b6 1F93      		push r17
 686 03b8 CF93      		push r28
 687 03ba DF93      		push r29
 688               	/* prologue end (size=4) */
 689 03bc 082F      		mov r16,r24
 690               	.LM85:
 691 03be C0E0      		ldi r28,lo8(malloc_heap)
 692 03c0 D0E0      		ldi r29,hi8(malloc_heap)
 693               	.LM86:
 694               	/* #APP */
 695 03c2 1FB7      		in r17, __SREG__
 696 03c4 F894      		cli
 697               		
 698               	/* #NOAPP */
 699               	.L70:
 700               	.LM87:
 701 03c6 8091 0000 		lds r24,mSentinel
 702 03ca 9091 0000 		lds r25,(mSentinel)+1
 703 03ce C817      		cp r28,r24
 704 03d0 D907      		cpc r29,r25
 705 03d2 B1F0      		breq .L69
 706               	.LM88:
 707 03d4 8881      		ld r24,Y
 708 03d6 9981      		ldd r25,Y+1
 709 03d8 97FF      		sbrs r25,7
 710 03da 08C0      		rjmp .L64
 711 03dc 8A81      		ldd r24,Y+2
 712 03de 8017      		cp r24,r16
 713 03e0 29F4      		brne .L64
 714               	.LBB10:
 715               	.LBB11:
 716               	.LM89:
 717 03e2 8C2F      		mov r24,r28
 718 03e4 9D2F      		mov r25,r29
 719 03e6 0396      		adiw r24,3
 720 03e8 0E94 0000 		call sos_blk_mem_free
 721               	.L64:
 722               	.LBE11:
 723               	.LBE10:
 724               	.LM90:
 725 03ec 8881      		ld r24,Y
 726 03ee 9981      		ldd r25,Y+1
 727 03f0 33E0      		ldi r19,3
 728 03f2 880F      	1:	lsl r24
 729 03f4 991F      		rol r25
 730 03f6 3A95      		dec r19
 731 03f8 E1F7      		brne 1b
 732 03fa C80F      		add r28,r24
 733 03fc D91F      		adc r29,r25
 734 03fe E3CF      		rjmp .L70
 735               	.L69:
 736               	.LM91:
 737               	/* #APP */
 738 0400 1FBF      		out __SREG__, r17
 739               		
 740               	.LM92:
 741               	/* #NOAPP */
 742 0402 80E0      		ldi r24,lo8(0)
 743 0404 90E0      		ldi r25,hi8(0)
 744               	/* epilogue: frame size=0 */
 745 0406 DF91      		pop r29
 746 0408 CF91      		pop r28
 747 040a 1F91      		pop r17
 748 040c 0F91      		pop r16
 749 040e 0895      		ret
 750               	/* epilogue end (size=5) */
 751               	/* function mem_remove_all size 53 (44) */
 752               	.LFE20:
 754               	.global	mem_init
 756               	mem_init:
 757               	.LFB21:
 758               	.LM93:
 759               	/* prologue: frame size=0 */
 760               	/* prologue end (size=0) */
 761               	.LM94:
 762 0410 40E0      		ldi r20,lo8(malloc_heap)
 763 0412 50E0      		ldi r21,hi8(malloc_heap)
 764               	.LM95:
 765 0414 5093 0000 		sts (mPool)+1,r21
 766 0418 4093 0000 		sts mPool,r20
 767               	.LM96:
 768 041c 6FEF      		ldi r22,lo8(255)
 769 041e 70E0      		ldi r23,hi8(255)
 770 0420 7093 0000 		sts (mNumberOfBlocks)+1,r23
 771 0424 6093 0000 		sts mNumberOfBlocks,r22
 772               	.LM97:
 773 0428 242F      		mov r18,r20
 774 042a 352F      		mov r19,r21
 775 042c 2850      		subi r18,lo8(-(2040))
 776 042e 384F      		sbci r19,hi8(-(2040))
 777 0430 3093 0000 		sts (mSentinel)+1,r19
 778 0434 2093 0000 		sts mSentinel,r18
 779               	.LM98:
 780 0438 80E0      		ldi r24,lo8(-32768)
 781 043a 90E8      		ldi r25,hi8(-32768)
 782 043c 9093 0000 		sts (malloc_heap+2040)+1,r25
 783 0440 8093 0000 		sts malloc_heap+2040,r24
 784               	.LM99:
 785 0444 3093 0000 		sts (malloc_heap+2043)+1,r19
 786 0448 2093 0000 		sts malloc_heap+2043,r18
 787               	.LM100:
 788 044c 3093 0000 		sts (malloc_heap+2045)+1,r19
 789 0450 2093 0000 		sts malloc_heap+2045,r18
 790               	.LM101:
 791 0454 7093 0000 		sts (malloc_heap)+1,r23
 792 0458 6093 0000 		sts malloc_heap,r22
 793               	.LM102:
 794 045c 952F      		mov r25,r21
 795 045e 842F      		mov r24,r20
 796 0460 0E94 0000 		call InsertAfter
 797               	/* epilogue: frame size=0 */
 798 0464 0895      		ret
 799               	/* epilogue end (size=1) */
 800               	/* function mem_init size 43 (42) */
 801               	.LFE21:
 803               	.global	ker_panic
 805               	ker_panic:
 806               	.LFB28:
 807               	.LM103:
 808               	/* prologue: frame size=0 */
 809 0466 CF93      		push r28
 810 0468 DF93      		push r29
 811               	/* prologue end (size=2) */
 812               	.LM104:
 813 046a 81E0      		ldi r24,lo8(1)
 814 046c 0E94 0000 		call ker_led
 815               	.LM105:
 816 0470 82E0      		ldi r24,lo8(2)
 817 0472 0E94 0000 		call ker_led
 818               	.LM106:
 819 0476 83E0      		ldi r24,lo8(3)
 820 0478 0E94 0000 		call ker_led
 821               	.LM107:
 822 047c CFEF      		ldi r28,lo8(-1)
 823 047e DFEF      		ldi r29,hi8(-1)
 824               	.L73:
 825               	.LM108:
 826               	/* #APP */
 827 0480 A895      		wdr
 828               	.LM109:
 829               	/* #NOAPP */
 830 0482 2097      		sbiw r28,0
 831 0484 49F4      		brne .L75
 832               	.LM110:
 833 0486 87E0      		ldi r24,lo8(7)
 834 0488 0E94 0000 		call ker_led
 835               	.LM111:
 836 048c 88E0      		ldi r24,lo8(8)
 837 048e 0E94 0000 		call ker_led
 838               	.LM112:
 839 0492 89E0      		ldi r24,lo8(9)
 840 0494 0E94 0000 		call ker_led
 841               	.L75:
 842               	.LM113:
 843 0498 2197      		sbiw r28,1
 844 049a F2CF      		rjmp .L73
 845               	/* epilogue: frame size=0 */
 846               	/* epilogue: noreturn */
 847               	/* epilogue end (size=0) */
 848               	/* function ker_panic size 28 (26) */
 849               	.LFE28:
 851               	.global	ker_mod_panic
 853               	ker_mod_panic:
 854               	.LFB27:
 855               	.LM114:
 856               	/* prologue: frame size=0 */
 857               	/* prologue end (size=0) */
 858               	.LM115:
 859 049c 0E94 0000 		call ker_panic
 860               	.LM116:
 861 04a0 9927      		clr r25
 862 04a2 87FD      		sbrc r24,7
 863 04a4 9095      		com r25
 864               	/* epilogue: frame size=0 */
 865 04a6 0895      		ret
 866               	/* epilogue end (size=1) */
 867               	/* function ker_mod_panic size 6 (5) */
 868               	.LFE27:
 870               	.global	ker_sys_malloc
 872               	ker_sys_malloc:
 873               	.LFB29:
 874               	.LM117:
 875               	/* prologue: frame size=0 */
 876 04a8 FF92      		push r15
 877 04aa 0F93      		push r16
 878 04ac 1F93      		push r17
 879 04ae CF93      		push r28
 880 04b0 DF93      		push r29
 881               	/* prologue end (size=5) */
 882 04b2 082F      		mov r16,r24
 883 04b4 192F      		mov r17,r25
 884               	.LM118:
 885 04b6 0E94 0000 		call ker_get_current_pid
 886 04ba F82E      		mov r15,r24
 887               	.LM119:
 888 04bc 682F      		mov r22,r24
 889 04be 912F      		mov r25,r17
 890 04c0 802F      		mov r24,r16
 891 04c2 0E94 0000 		call sos_blk_mem_alloc
 892 04c6 D92F      		mov r29,r25
 893 04c8 C82F      		mov r28,r24
 894               	.LM120:
 895 04ca 892B      		or r24,r25
 896 04cc 19F4      		brne .L79
 897               	.LM121:
 898 04ce 8F2D      		mov r24,r15
 899 04d0 0E94 0000 		call ker_mod_panic
 900               	.L79:
 901               	.LM122:
 902 04d4 8C2F      		mov r24,r28
 903 04d6 9D2F      		mov r25,r29
 904               	/* epilogue: frame size=0 */
 905 04d8 DF91      		pop r29
 906 04da CF91      		pop r28
 907 04dc 1F91      		pop r17
 908 04de 0F91      		pop r16
 909 04e0 FF90      		pop r15
 910 04e2 0895      		ret
 911               	/* epilogue end (size=6) */
 912               	/* function ker_sys_malloc size 30 (19) */
 913               	.LFE29:
 915               	.global	ker_sys_free
 917               	ker_sys_free:
 918               	.LFB30:
 919               	.LM123:
 920               	/* prologue: frame size=0 */
 921               	/* prologue end (size=0) */
 922               	.LM124:
 923 04e4 0E94 0000 		call sos_blk_mem_free
 924               	/* epilogue: frame size=0 */
 925 04e8 0895      		ret
 926               	/* epilogue end (size=1) */
 927               	/* function ker_sys_free size 3 (2) */
 928               	.LFE30:
 930               	.global	ker_sys_change_own
 932               	ker_sys_change_own:
 933               	.LFB31:
 934               	.LM125:
 935               	/* prologue: frame size=0 */
 936 04ea 0F93      		push r16
 937 04ec 1F93      		push r17
 938 04ee CF93      		push r28
 939               	/* prologue end (size=3) */
 940 04f0 082F      		mov r16,r24
 941 04f2 192F      		mov r17,r25
 942               	.LM126:
 943 04f4 0E94 0000 		call ker_get_current_pid
 944 04f8 C82F      		mov r28,r24
 945               	.LM127:
 946 04fa 682F      		mov r22,r24
 947 04fc 912F      		mov r25,r17
 948 04fe 802F      		mov r24,r16
 949 0500 0E94 0000 		call sos_blk_mem_change_own
 950 0504 8823      		tst r24
 951 0506 19F0      		breq .L82
 952               	.LM128:
 953 0508 8C2F      		mov r24,r28
 954 050a 0E94 0000 		call ker_mod_panic
 955               	.L82:
 956               	.LM129:
 957 050e 80E0      		ldi r24,lo8(0)
 958 0510 90E0      		ldi r25,hi8(0)
 959               	/* epilogue: frame size=0 */
 960 0512 CF91      		pop r28
 961 0514 1F91      		pop r17
 962 0516 0F91      		pop r16
 963 0518 0895      		ret
 964               	/* epilogue end (size=4) */
 965               	/* function ker_sys_change_own size 24 (17) */
 966               	.LFE31:
 968               		.lcomm mPool,2
 969               		.lcomm mSentinel,2
 970               		.lcomm mNumberOfBlocks,2
 971               		.lcomm malloc_heap,2048
 972               	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 malloc.c
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:3      *ABS*:0000003f __SREG__
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:4      *ABS*:0000003e __SP_H__
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:5      *ABS*:0000003d __SP_L__
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:6      *ABS*:00000000 __tmp_reg__
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:7      *ABS*:00000001 __zero_reg__
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:20     .text:00000000 sos_blk_mem_change_own
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:80     .text:0000004c Unlink
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:114    .text:00000074 sos_blk_mem_longterm_alloc
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:968    .bss:00000002 mSentinel
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:341    .text:000001c8 InsertAfter
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:381    .text:000001fa sos_blk_mem_free
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:970    .bss:00000006 malloc_heap
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:969    .bss:00000004 mNumberOfBlocks
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:471    .text:0000027c sos_blk_mem_alloc
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:680    .text:000003b4 mem_remove_all
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:756    .text:00000410 mem_init
                             .bss:00000000 mPool
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:805    .text:00000466 ker_panic
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:853    .text:0000049c ker_mod_panic
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:872    .text:000004a8 ker_sys_malloc
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:917    .text:000004e4 ker_sys_free
c:\DOCUME~1\jlhsu\LOCALS~1\Temp/cc2bdaaa.s:932    .text:000004ea ker_sys_change_own

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
ker_led
ker_get_current_pid
